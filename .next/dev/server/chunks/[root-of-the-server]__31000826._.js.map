{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krish/Downloads/nivara-e-commerce-website/lib/session.ts"],"sourcesContent":["import { cookies } from \"next/headers\"\nimport { SignJWT, jwtVerify } from \"jose\"\n\nconst SECRET_KEY = new TextEncoder().encode(process.env.JWT_SECRET || \"your-secret-key-change-this-in-production\")\n\nexport interface SessionData {\n  userId: number\n  email: string\n  role: string\n}\n\nexport async function createSession(data: SessionData): Promise<string> {\n  return new SignJWT(data).setProtectedHeader({ alg: \"HS256\" }).setIssuedAt().setExpirationTime(\"7d\").sign(SECRET_KEY)\n}\n\nexport async function getSession(): Promise<SessionData | null> {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"session\")?.value\n\n  if (!token) {\n    return null\n  }\n\n  try {\n    const verified = await jwtVerify(token, SECRET_KEY)\n    return verified.payload as SessionData\n  } catch (err) {\n    return null\n  }\n}\n\nexport async function verifyAuth(token: string): Promise<SessionData | null> {\n  try {\n    const verified = await jwtVerify(token, SECRET_KEY)\n    return verified.payload as SessionData\n  } catch (err) {\n    return null\n  }\n}\n\nexport async function deleteSession(): Promise<void> {\n  const cookieStore = await cookies()\n  cookieStore.delete(\"session\")\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;;;AAEA,MAAM,aAAa,IAAI,cAAc,MAAM,CAAC,QAAQ,GAAG,CAAC,UAAU,IAAI;AAQ/D,eAAe,cAAc,IAAiB;IACnD,OAAO,IAAI,qNAAO,CAAC,MAAM,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAAG,WAAW,GAAG,iBAAiB,CAAC,MAAM,IAAI,CAAC;AAC3G;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,+LAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,YAAY;IAE1C,IAAI,CAAC,OAAO;QACV,OAAO;IACT;IAEA,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,yNAAS,EAAC,OAAO;QACxC,OAAO,SAAS,OAAO;IACzB,EAAE,OAAO,KAAK;QACZ,OAAO;IACT;AACF;AAEO,eAAe,WAAW,KAAa;IAC5C,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,yNAAS,EAAC,OAAO;QACxC,OAAO,SAAS,OAAO;IACzB,EAAE,OAAO,KAAK;QACZ,OAAO;IACT;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,+LAAO;IACjC,YAAY,MAAM,CAAC;AACrB"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krish/Downloads/nivara-e-commerce-website/lib/db.ts"],"sourcesContent":["import { neon } from \"@neondatabase/serverless\"\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL environment variable is not set\")\n}\n\nexport const sql = neon(process.env.DATABASE_URL)\n"],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY,EAAE;IAC7B,MAAM,IAAI,MAAM;AAClB;AAEO,MAAM,MAAM,IAAA,mNAAI,EAAC,QAAQ,GAAG,CAAC,YAAY"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krish/Downloads/nivara-e-commerce-website/app/api/cart/count/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { getSession } from \"@/lib/session\"\nimport { sql } from \"@/lib/db\"\n\nexport async function GET() {\n  try {\n    const session = await getSession()\n\n    if (!session) {\n      return NextResponse.json({ count: 0 })\n    }\n\n    const result = await sql`\n      SELECT COALESCE(SUM(quantity), 0) as count\n      FROM cart_items\n      WHERE user_id = ${session.userId}\n    `\n\n    return NextResponse.json({ count: Number(result[0].count) })\n  } catch (error) {\n    console.error(\"[v0] Cart count error:\", error)\n    return NextResponse.json({ count: 0 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,iLAAU;QAEhC,IAAI,CAAC,SAAS;YACZ,OAAO,mMAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAE;QACtC;QAEA,MAAM,SAAS,MAAM,qKAAG,CAAC;;;sBAGP,EAAE,QAAQ,MAAM,CAAC;IACnC,CAAC;QAED,OAAO,mMAAY,CAAC,IAAI,CAAC;YAAE,OAAO,OAAO,MAAM,CAAC,EAAE,CAAC,KAAK;QAAE;IAC5D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,mMAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAE;IACtC;AACF"}}]
}