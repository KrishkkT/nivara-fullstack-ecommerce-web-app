{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krish/Downloads/nivarasilverjewels/lib/db.ts"],"sourcesContent":["import { neon } from \"@neondatabase/serverless\"\n\n// Lazy initialization - only check for DATABASE_URL when it's actually used\nexport const sql = ((...args: any[]) => {\n  if (!process.env.DATABASE_URL) {\n    throw new Error(\"DATABASE_URL environment variable is not set\")\n  }\n  \n  const sqlInstance = neon(process.env.DATABASE_URL)\n  // @ts-ignore\n  return sqlInstance(...args)\n}) as ReturnType<typeof neon>"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM,MAAO,CAAC,GAAG;IACtB,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY,EAAE;QAC7B,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,cAAc,IAAA,mMAAI,EAAC,QAAQ,GAAG,CAAC,YAAY;IACjD,aAAa;IACb,OAAO,eAAe;AACxB"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krish/Downloads/nivarasilverjewels/lib/session.ts"],"sourcesContent":["import { cookies } from \"next/headers\"\nimport { SignJWT, jwtVerify } from \"jose\"\n\nconst SECRET_KEY = new TextEncoder().encode(process.env.JWT_SECRET || \"your-secret-key-change-this-in-production\")\n\nexport interface SessionData {\n  userId: number\n  email: string\n  role: string\n}\n\nexport async function createSession(data: SessionData): Promise<string> {\n  return new SignJWT(data).setProtectedHeader({ alg: \"HS256\" }).setIssuedAt().setExpirationTime(\"7d\").sign(SECRET_KEY)\n}\n\nexport async function getSession(): Promise<SessionData | null> {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"session\")?.value\n\n  if (!token) {\n    return null\n  }\n\n  try {\n    const verified = await jwtVerify(token, SECRET_KEY)\n    return verified.payload as SessionData\n  } catch (err) {\n    return null\n  }\n}\n\nexport async function verifyAuth(token: string): Promise<SessionData | null> {\n  try {\n    const verified = await jwtVerify(token, SECRET_KEY)\n    return verified.payload as SessionData\n  } catch (err) {\n    return null\n  }\n}\n\nexport async function deleteSession(): Promise<void> {\n  const cookieStore = await cookies()\n  cookieStore.delete(\"session\")\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;;;AAEA,MAAM,aAAa,IAAI,cAAc,MAAM,CAAC,QAAQ,GAAG,CAAC,UAAU,IAAI;AAQ/D,eAAe,cAAc,IAAiB;IACnD,OAAO,IAAI,qMAAO,CAAC,MAAM,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAAG,WAAW,GAAG,iBAAiB,CAAC,MAAM,IAAI,CAAC;AAC3G;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,+KAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,YAAY;IAE1C,IAAI,CAAC,OAAO;QACV,OAAO;IACT;IAEA,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,yMAAS,EAAC,OAAO;QACxC,OAAO,SAAS,OAAO;IACzB,EAAE,OAAO,KAAK;QACZ,OAAO;IACT;AACF;AAEO,eAAe,WAAW,KAAa;IAC5C,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,yMAAS,EAAC,OAAO;QACxC,OAAO,SAAS,OAAO;IACzB,EAAE,OAAO,KAAK;QACZ,OAAO;IACT;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,+KAAO;IACjC,YAAY,MAAM,CAAC;AACrB"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krish/Downloads/nivarasilverjewels/app/api/wishlist/count/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { sql } from \"@/lib/db\"\nimport { getSession } from \"@/lib/session\"\n\nexport async function GET() {\n  try {\n    const session = await getSession()\n\n    if (!session) {\n      return NextResponse.json({ count: 0 })\n    }\n\n    const result = await sql`\n      SELECT COUNT(*) as count\n      FROM wishlist\n      WHERE user_id = ${session.userId}\n    `\n\n    return NextResponse.json({ count: Number(result[0]?.count || 0) })\n  } catch (error) {\n    console.error(\"[v0] Wishlist count error:\", error)\n    return NextResponse.json({ count: 0 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,iKAAU;QAEhC,IAAI,CAAC,SAAS;YACZ,OAAO,mLAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAE;QACtC;QAEA,MAAM,SAAS,MAAM,qJAAG,CAAC;;;sBAGP,EAAE,QAAQ,MAAM,CAAC;IACnC,CAAC;QAED,OAAO,mLAAY,CAAC,IAAI,CAAC;YAAE,OAAO,OAAO,MAAM,CAAC,EAAE,EAAE,SAAS;QAAG;IAClE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,mLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAE;IACtC;AACF"}}]
}