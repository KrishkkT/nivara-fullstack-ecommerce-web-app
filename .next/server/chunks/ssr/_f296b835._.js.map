{"version":3,"sources":["../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts","../../../../app/actions/wishlist.ts","../../../../app/actions/cart.ts","../../../../.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n","\"use server\"\n\nimport { sql } from \"@/lib/db\"\nimport { getSession } from \"@/lib/session\"\nimport { revalidatePath } from \"next/cache\"\n\nexport async function addToWishlist(productId: number) {\n  try {\n    const session = await getSession()\n\n    if (!session) {\n      return { error: \"Please sign in to add items to wishlist\" }\n    }\n\n    // Check if already in wishlist\n    const existing = await sql`\n      SELECT * FROM wishlist\n      WHERE user_id = ${session.userId} AND product_id = ${productId}\n    `\n\n    if (existing.length > 0) {\n      return { error: \"Item already in wishlist\" }\n    }\n\n    await sql`\n      INSERT INTO wishlist (user_id, product_id)\n      VALUES (${session.userId}, ${productId})\n    `\n\n    revalidatePath(\"/wishlist\")\n    return { success: true }\n  } catch (error) {\n    console.error(\"[v0] Add to wishlist error:\", error)\n    return { error: \"Failed to add item to wishlist\" }\n  }\n}\n\nexport async function removeFromWishlist(productId: number) {\n  try {\n    const session = await getSession()\n\n    if (!session) {\n      return { error: \"Please sign in\" }\n    }\n\n    await sql`\n      DELETE FROM wishlist\n      WHERE user_id = ${session.userId} AND product_id = ${productId}\n    `\n\n    revalidatePath(\"/wishlist\")\n    return { success: true }\n  } catch (error) {\n    console.error(\"[v0] Remove from wishlist error:\", error)\n    return { error: \"Failed to remove item\" }\n  }\n}\n\nexport async function moveToWishlist(cartItemId: number) {\n  try {\n    const session = await getSession()\n\n    if (!session) {\n      return { error: \"Please sign in\" }\n    }\n\n    // Get the cart item\n    const cartItem = await sql`\n      SELECT product_id FROM cart_items\n      WHERE id = ${cartItemId} AND user_id = ${session.userId}\n    `\n\n    if (cartItem.length === 0) {\n      return { error: \"Cart item not found\" }\n    }\n\n    const productId = cartItem[0].product_id\n\n    // Check if already in wishlist\n    const existing = await sql`\n      SELECT * FROM wishlist\n      WHERE user_id = ${session.userId} AND product_id = ${productId}\n    `\n\n    if (existing.length === 0) {\n      // Add to wishlist\n      await sql`\n        INSERT INTO wishlist (user_id, product_id)\n        VALUES (${session.userId}, ${productId})\n      `\n    }\n\n    // Remove from cart\n    await sql`\n      DELETE FROM cart_items\n      WHERE id = ${cartItemId} AND user_id = ${session.userId}\n    `\n\n    revalidatePath(\"/cart\")\n    revalidatePath(\"/wishlist\")\n    return { success: true }\n  } catch (error) {\n    console.error(\"[v0] Move to wishlist error:\", error)\n    return { error: \"Failed to move item to wishlist\" }\n  }\n}\n\nexport async function isInWishlist(productId: number) {\n  try {\n    const session = await getSession()\n\n    if (!session) {\n      return false\n    }\n\n    const result = await sql`\n      SELECT 1 FROM wishlist\n      WHERE user_id = ${session.userId} AND product_id = ${productId}\n    `\n\n    return result.length > 0\n  } catch (error) {\n    console.error(\"[v0] Check wishlist error:\", error)\n    return false\n  }\n}\n","\"use server\"\n\nimport { sql } from \"@/lib/db\"\nimport { getSession } from \"@/lib/session\"\nimport { revalidatePath } from \"next/cache\"\n\nexport async function addToCart(productId: number) {\n  try {\n    const session = await getSession()\n\n    if (!session) {\n      return { error: \"Please sign in to add items to cart\" }\n    }\n\n    // Check if item already in cart\n    const existing = await sql`\n      SELECT * FROM cart_items\n      WHERE user_id = ${session.userId} AND product_id = ${productId}\n    `\n\n    if (existing.length > 0) {\n      // Update quantity\n      await sql`\n        UPDATE cart_items\n        SET quantity = quantity + 1\n        WHERE user_id = ${session.userId} AND product_id = ${productId}\n      `\n    } else {\n      // Insert new item\n      await sql`\n        INSERT INTO cart_items (user_id, product_id, quantity)\n        VALUES (${session.userId}, ${productId}, 1)\n      `\n    }\n\n    revalidatePath(\"/cart\")\n    return { success: true }\n  } catch (error) {\n    console.error(\"[v0] Add to cart error:\", error)\n    return { error: \"Failed to add item to cart\" }\n  }\n}\n\nexport async function updateCartQuantity(cartItemId: number, quantity: number) {\n  try {\n    const session = await getSession()\n\n    if (!session) {\n      return { error: \"Please sign in\" }\n    }\n\n    await sql`\n      UPDATE cart_items\n      SET quantity = ${quantity}\n      WHERE id = ${cartItemId} AND user_id = ${session.userId}\n    `\n\n    revalidatePath(\"/cart\")\n    return { success: true }\n  } catch (error) {\n    console.error(\"[v0] Update cart error:\", error)\n    return { error: \"Failed to update cart\" }\n  }\n}\n\nexport async function removeFromCart(cartItemId: number) {\n  try {\n    const session = await getSession()\n\n    if (!session) {\n      return { error: \"Please sign in\" }\n    }\n\n    await sql`\n      DELETE FROM cart_items\n      WHERE id = ${cartItemId} AND user_id = ${session.userId}\n    `\n\n    revalidatePath(\"/cart\")\n    return { success: true }\n  } catch (error) {\n    console.error(\"[v0] Remove from cart error:\", error)\n    return { error: \"Failed to remove item\" }\n  }\n}\n","export {addToCart as '4000a98622c3bd7838534c238d4593ca798a69456e'} from 'ACTIONS_MODULE0'\nexport {addToWishlist as '408f14e84e2d921f7b530266bb9076850d808182ad'} from 'ACTIONS_MODULE1'\nexport {removeFromWishlist as '4038eb4d09ebc23cb5773f940e0512a07e99923015'} from 'ACTIONS_MODULE1'\nexport {isInWishlist as '40083dab82c37eeb0a0fd825fc41793aa11806b167'} from 'ACTIONS_MODULE1'\n"],"names":["registerServerReference","ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"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","ignoreList":[0,1]}