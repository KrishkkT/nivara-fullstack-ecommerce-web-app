{"version":3,"sources":["../../../../components/search-results.tsx/__nextjs-internal-proxy.mjs","../../../../app/search/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SearchResults = registerClientReference(\n    function() { throw new Error(\"Attempted to call SearchResults() from the server but SearchResults is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/search-results.tsx\",\n    \"SearchResults\",\n);\n","import { sql } from \"@/lib/db\"\nimport { SearchResults } from \"@/components/search-results\"\n\nexport default async function SearchPage({\n  searchParams,\n}: {\n  searchParams: { q?: string; designNumber?: string; minPrice?: string; maxPrice?: string }\n}) {\n  const query = searchParams.q || \"\"\n  const designNumber = searchParams.designNumber || \"\"\n  const minPrice = searchParams.minPrice || \"\"\n  const maxPrice = searchParams.maxPrice || \"\"\n\n  let products = []\n\n  if (query || designNumber || minPrice || maxPrice) {\n    let sqlQuery = `\n      SELECT \n        p.*,\n        c.name as category_name,\n        c.slug as category_slug\n      FROM products p\n      JOIN categories c ON p.category_id = c.id\n      WHERE p.is_active = true\n    `\n\n    const conditions = []\n    const values = []\n\n    // Text search (name, description, category)\n    if (query) {\n      conditions.push(`\n        (p.name ILIKE $${conditions.length + 1} OR \n         p.description ILIKE $${conditions.length + 2} OR \n         c.name ILIKE $${conditions.length + 3} OR\n         p.design_number ILIKE $${conditions.length + 4})\n      `)\n      values.push(`%${query}%`, `%${query}%`, `%${query}%`, `%${query}%`)\n    }\n\n    // Design number search\n    if (designNumber) {\n      conditions.push(`p.design_number ILIKE $${conditions.length + 1}`)\n      values.push(`%${designNumber}%`)\n    }\n\n    // Price range search\n    if (minPrice) {\n      conditions.push(`p.price >= $${conditions.length + 1}`)\n      values.push(minPrice)\n    }\n    \n    if (maxPrice) {\n      conditions.push(`p.price <= $${conditions.length + 1}`)\n      values.push(maxPrice)\n    }\n\n    if (conditions.length > 0) {\n      sqlQuery += \" AND \" + conditions.join(\" AND \")\n    }\n\n    sqlQuery += \" ORDER BY p.created_at DESC LIMIT 50\"\n\n    products = await sql(sqlQuery, ...values)\n  }\n\n  return <SearchResults query={query} products={products} />\n}"],"names":[],"mappings":"qUAEO,IAAM,EAAgB,CAAA,EAAA,AAD7B,EAAA,CAAA,CAAA,OAC6B,uBAAA,AAAuB,EAChD,WAAa,MAAM,AAAI,MAAM,wOAA0O,EACvQ,8DACA,oEAHG,IAAM,EAAgB,CAAA,EAD7B,AAC6B,EAD7B,CAAA,CAAA,OAC6B,uBAAuB,AAAvB,EACzB,WAAa,MAAM,AAAI,MAAM,wOAA0O,EACvQ,0CACA,+ICLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,eAAe,EAAW,CACvC,cAAY,CAGb,EACC,IAAM,EAAQ,EAAa,CAAC,EAAI,GAC1B,EAAe,EAAa,YAAY,EAAI,GAC5C,EAAW,EAAa,QAAQ,EAAI,GACpC,EAAW,EAAa,QAAQ,EAAI,GAEtC,EAAW,EAAE,CAEjB,GAAI,GAAS,GAAgB,GAAY,EAAU,CACjD,IAAI,EAAW,CAAC;;;;;;;;IAQhB,CAAC,CAEK,EAAa,EAAE,CACf,EAAS,EAAE,CAGb,IACF,EAAW,CADF,GACM,CAAC,CAAC;uBACA,EAAE,EAAW,MAAM,CAAG,EAAE;8BACjB,EAAE,EAAW,MAAM,CAAG,EAAE;uBAC/B,EAAE,EAAW,MAAM,CAAG,EAAE;gCACf,EAAE,EAAW,MAAM,CAAG,EAAE;MAClD,CAAC,EACD,EAAO,IAAI,CAAC,CAAC,CAAC,EAAE,EAAM,CAAC,CAAC,CAAE,CAAC,CAAC,EAAE,EAAM,CAAC,CAAC,CAAE,CAAC,CAAC,EAAE,EAAM,CAAC,CAAC,CAAE,CAAC,CAAC,EAAE,EAAM,CAAC,CAAC,GAIhE,IACF,EAAW,IAAI,CAAC,CAAC,EADD,qBACwB,EAAE,EAAW,MAAM,CAAG,EAAA,CAAG,EACjE,EAAO,IAAI,CAAC,CAAC,CAAC,EAAE,EAAa,CAAC,CAAC,GAI7B,IACF,EAAW,IADC,AACG,CAAC,CAAC,YAAY,EAAE,EAAW,MAAM,CAAG,EAAA,CAAG,EACtD,EAAO,IAAI,CAAC,IAGV,IACF,EAAW,IAAI,AADH,CACI,CAAC,YAAY,EAAE,EAAW,MAAM,CAAG,EAAA,CAAG,EACtD,EAAO,IAAI,CAAC,IAGV,EAAW,MAAM,CAAG,GAAG,CACzB,GAAY,QAAU,EAAW,IAAI,CAAC,QAAA,EAGxC,GAAY,uCAEZ,EAAW,MAAM,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,KAAa,EACpC,CAEA,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,MAAO,EAAO,SAAU,GAChD","ignoreList":[0]}