{"version":3,"sources":["../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts","turbopack:///[project]/node_modules/nodemailer/package.json","turbopack:///[project]/node_modules/nodemailer/lib/well-known/services.json","../../../../app/actions/admin.ts"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n","{\"name\":\"nodemailer\",\"version\":\"7.0.11\",\"description\":\"Easy as cake e-mail sending from your Node.js applications\",\"main\":\"lib/nodemailer.js\",\"scripts\":{\"test\":\"node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js\",\"test:coverage\":\"c8 node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js\",\"format\":\"prettier --write \\\"**/*.{js,json,md}\\\"\",\"format:check\":\"prettier --check \\\"**/*.{js,json,md}\\\"\",\"lint\":\"eslint .\",\"lint:fix\":\"eslint . --fix\",\"update\":\"rm -rf node_modules/ package-lock.json && ncu -u && npm install\"},\"repository\":{\"type\":\"git\",\"url\":\"https://github.com/nodemailer/nodemailer.git\"},\"keywords\":[\"Nodemailer\"],\"author\":\"Andris Reinman\",\"license\":\"MIT-0\",\"bugs\":{\"url\":\"https://github.com/nodemailer/nodemailer/issues\"},\"homepage\":\"https://nodemailer.com/\",\"devDependencies\":{\"@aws-sdk/client-sesv2\":\"3.940.0\",\"bunyan\":\"1.8.15\",\"c8\":\"10.1.3\",\"eslint\":\"9.39.1\",\"eslint-config-prettier\":\"10.1.8\",\"globals\":\"16.5.0\",\"libbase64\":\"1.3.0\",\"libmime\":\"5.3.7\",\"libqp\":\"2.1.1\",\"nodemailer-ntlm-auth\":\"1.0.4\",\"prettier\":\"3.6.2\",\"proxy\":\"1.0.2\",\"proxy-test-server\":\"1.0.0\",\"smtp-server\":\"3.16.1\"},\"engines\":{\"node\":\">=6.0.0\"}}","{\"1und1\":{\"description\":\"1&1 Mail (German hosting provider)\",\"host\":\"smtp.1und1.de\",\"port\":465,\"secure\":true,\"authMethod\":\"LOGIN\"},\"126\":{\"description\":\"126 Mail (NetEase)\",\"host\":\"smtp.126.com\",\"port\":465,\"secure\":true},\"163\":{\"description\":\"163 Mail (NetEase)\",\"host\":\"smtp.163.com\",\"port\":465,\"secure\":true},\"Aliyun\":{\"description\":\"Alibaba Cloud Mail\",\"domains\":[\"aliyun.com\"],\"host\":\"smtp.aliyun.com\",\"port\":465,\"secure\":true},\"AliyunQiye\":{\"description\":\"Alibaba Cloud Enterprise Mail\",\"host\":\"smtp.qiye.aliyun.com\",\"port\":465,\"secure\":true},\"AOL\":{\"description\":\"AOL Mail\",\"domains\":[\"aol.com\"],\"host\":\"smtp.aol.com\",\"port\":587},\"Aruba\":{\"description\":\"Aruba PEC (Italian email provider)\",\"domains\":[\"aruba.it\",\"pec.aruba.it\"],\"aliases\":[\"Aruba PEC\"],\"host\":\"smtps.aruba.it\",\"port\":465,\"secure\":true,\"authMethod\":\"LOGIN\"},\"Bluewin\":{\"description\":\"Bluewin (Swiss email provider)\",\"host\":\"smtpauths.bluewin.ch\",\"domains\":[\"bluewin.ch\"],\"port\":465},\"BOL\":{\"description\":\"BOL Mail (Brazilian provider)\",\"domains\":[\"bol.com.br\"],\"host\":\"smtp.bol.com.br\",\"port\":587,\"requireTLS\":true},\"DebugMail\":{\"description\":\"DebugMail (email testing service)\",\"host\":\"debugmail.io\",\"port\":25},\"Disroot\":{\"description\":\"Disroot (privacy-focused provider)\",\"domains\":[\"disroot.org\"],\"host\":\"disroot.org\",\"port\":587,\"secure\":false,\"authMethod\":\"LOGIN\"},\"DynectEmail\":{\"description\":\"Dyn Email Delivery\",\"aliases\":[\"Dynect\"],\"host\":\"smtp.dynect.net\",\"port\":25},\"ElasticEmail\":{\"description\":\"Elastic Email\",\"aliases\":[\"Elastic Email\"],\"host\":\"smtp.elasticemail.com\",\"port\":465,\"secure\":true},\"Ethereal\":{\"description\":\"Ethereal Email (email testing service)\",\"aliases\":[\"ethereal.email\"],\"host\":\"smtp.ethereal.email\",\"port\":587},\"FastMail\":{\"description\":\"FastMail\",\"domains\":[\"fastmail.fm\"],\"host\":\"smtp.fastmail.com\",\"port\":465,\"secure\":true},\"Feishu Mail\":{\"description\":\"Feishu Mail (Lark)\",\"aliases\":[\"Feishu\",\"FeishuMail\"],\"domains\":[\"www.feishu.cn\"],\"host\":\"smtp.feishu.cn\",\"port\":465,\"secure\":true},\"Forward Email\":{\"description\":\"Forward Email (email forwarding service)\",\"aliases\":[\"FE\",\"ForwardEmail\"],\"domains\":[\"forwardemail.net\"],\"host\":\"smtp.forwardemail.net\",\"port\":465,\"secure\":true},\"GandiMail\":{\"description\":\"Gandi Mail\",\"aliases\":[\"Gandi\",\"Gandi Mail\"],\"host\":\"mail.gandi.net\",\"port\":587},\"Gmail\":{\"description\":\"Gmail\",\"aliases\":[\"Google Mail\"],\"domains\":[\"gmail.com\",\"googlemail.com\"],\"host\":\"smtp.gmail.com\",\"port\":465,\"secure\":true},\"GMX\":{\"description\":\"GMX Mail\",\"domains\":[\"gmx.com\",\"gmx.net\",\"gmx.de\"],\"host\":\"mail.gmx.com\",\"port\":587},\"Godaddy\":{\"description\":\"GoDaddy Email (US)\",\"host\":\"smtpout.secureserver.net\",\"port\":25},\"GodaddyAsia\":{\"description\":\"GoDaddy Email (Asia)\",\"host\":\"smtp.asia.secureserver.net\",\"port\":25},\"GodaddyEurope\":{\"description\":\"GoDaddy Email (Europe)\",\"host\":\"smtp.europe.secureserver.net\",\"port\":25},\"hot.ee\":{\"description\":\"Hot.ee (Estonian email provider)\",\"host\":\"mail.hot.ee\"},\"Hotmail\":{\"description\":\"Outlook.com / Hotmail\",\"aliases\":[\"Outlook\",\"Outlook.com\",\"Hotmail.com\"],\"domains\":[\"hotmail.com\",\"outlook.com\"],\"host\":\"smtp-mail.outlook.com\",\"port\":587},\"iCloud\":{\"description\":\"iCloud Mail\",\"aliases\":[\"Me\",\"Mac\"],\"domains\":[\"me.com\",\"mac.com\"],\"host\":\"smtp.mail.me.com\",\"port\":587},\"Infomaniak\":{\"description\":\"Infomaniak Mail (Swiss hosting provider)\",\"host\":\"mail.infomaniak.com\",\"domains\":[\"ik.me\",\"ikmail.com\",\"etik.com\"],\"port\":587},\"KolabNow\":{\"description\":\"KolabNow (secure email service)\",\"domains\":[\"kolabnow.com\"],\"aliases\":[\"Kolab\"],\"host\":\"smtp.kolabnow.com\",\"port\":465,\"secure\":true,\"authMethod\":\"LOGIN\"},\"Loopia\":{\"description\":\"Loopia (Swedish hosting provider)\",\"host\":\"mailcluster.loopia.se\",\"port\":465},\"Loops\":{\"description\":\"Loops\",\"host\":\"smtp.loops.so\",\"port\":587},\"mail.ee\":{\"description\":\"Mail.ee (Estonian email provider)\",\"host\":\"smtp.mail.ee\"},\"Mail.ru\":{\"description\":\"Mail.ru\",\"host\":\"smtp.mail.ru\",\"port\":465,\"secure\":true},\"Mailcatch.app\":{\"description\":\"Mailcatch (email testing service)\",\"host\":\"sandbox-smtp.mailcatch.app\",\"port\":2525},\"Maildev\":{\"description\":\"MailDev (local email testing)\",\"port\":1025,\"ignoreTLS\":true},\"MailerSend\":{\"description\":\"MailerSend\",\"host\":\"smtp.mailersend.net\",\"port\":587},\"Mailgun\":{\"description\":\"Mailgun\",\"host\":\"smtp.mailgun.org\",\"port\":465,\"secure\":true},\"Mailjet\":{\"description\":\"Mailjet\",\"host\":\"in.mailjet.com\",\"port\":587},\"Mailosaur\":{\"description\":\"Mailosaur (email testing service)\",\"host\":\"mailosaur.io\",\"port\":25},\"Mailtrap\":{\"description\":\"Mailtrap\",\"host\":\"live.smtp.mailtrap.io\",\"port\":587},\"Mandrill\":{\"description\":\"Mandrill (by Mailchimp)\",\"host\":\"smtp.mandrillapp.com\",\"port\":587},\"Naver\":{\"description\":\"Naver Mail (Korean email provider)\",\"host\":\"smtp.naver.com\",\"port\":587},\"OhMySMTP\":{\"description\":\"OhMySMTP (email delivery service)\",\"host\":\"smtp.ohmysmtp.com\",\"port\":587,\"secure\":false},\"One\":{\"description\":\"One.com Email\",\"host\":\"send.one.com\",\"port\":465,\"secure\":true},\"OpenMailBox\":{\"description\":\"OpenMailBox\",\"aliases\":[\"OMB\",\"openmailbox.org\"],\"host\":\"smtp.openmailbox.org\",\"port\":465,\"secure\":true},\"Outlook365\":{\"description\":\"Microsoft 365 / Office 365\",\"host\":\"smtp.office365.com\",\"port\":587,\"secure\":false},\"Postmark\":{\"description\":\"Postmark\",\"aliases\":[\"PostmarkApp\"],\"host\":\"smtp.postmarkapp.com\",\"port\":2525},\"Proton\":{\"description\":\"Proton Mail\",\"aliases\":[\"ProtonMail\",\"Proton.me\",\"Protonmail.com\",\"Protonmail.ch\"],\"domains\":[\"proton.me\",\"protonmail.com\",\"pm.me\",\"protonmail.ch\"],\"host\":\"smtp.protonmail.ch\",\"port\":587,\"requireTLS\":true},\"qiye.aliyun\":{\"description\":\"Alibaba Mail Enterprise Edition\",\"host\":\"smtp.mxhichina.com\",\"port\":\"465\",\"secure\":true},\"QQ\":{\"description\":\"QQ Mail\",\"domains\":[\"qq.com\"],\"host\":\"smtp.qq.com\",\"port\":465,\"secure\":true},\"QQex\":{\"description\":\"QQ Enterprise Mail\",\"aliases\":[\"QQ Enterprise\"],\"domains\":[\"exmail.qq.com\"],\"host\":\"smtp.exmail.qq.com\",\"port\":465,\"secure\":true},\"Resend\":{\"description\":\"Resend\",\"host\":\"smtp.resend.com\",\"port\":465,\"secure\":true},\"Runbox\":{\"description\":\"Runbox (Norwegian email provider)\",\"domains\":[\"runbox.com\"],\"host\":\"smtp.runbox.com\",\"port\":465,\"secure\":true},\"SendCloud\":{\"description\":\"SendCloud (Chinese email delivery)\",\"host\":\"smtp.sendcloud.net\",\"port\":2525},\"SendGrid\":{\"description\":\"SendGrid\",\"host\":\"smtp.sendgrid.net\",\"port\":587},\"SendinBlue\":{\"description\":\"Brevo (formerly Sendinblue)\",\"aliases\":[\"Brevo\"],\"host\":\"smtp-relay.brevo.com\",\"port\":587},\"SendPulse\":{\"description\":\"SendPulse\",\"host\":\"smtp-pulse.com\",\"port\":465,\"secure\":true},\"SES\":{\"description\":\"AWS SES US East (N. Virginia)\",\"host\":\"email-smtp.us-east-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-AP-NORTHEAST-1\":{\"description\":\"AWS SES Asia Pacific (Tokyo)\",\"host\":\"email-smtp.ap-northeast-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-AP-NORTHEAST-2\":{\"description\":\"AWS SES Asia Pacific (Seoul)\",\"host\":\"email-smtp.ap-northeast-2.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-AP-NORTHEAST-3\":{\"description\":\"AWS SES Asia Pacific (Osaka)\",\"host\":\"email-smtp.ap-northeast-3.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-AP-SOUTH-1\":{\"description\":\"AWS SES Asia Pacific (Mumbai)\",\"host\":\"email-smtp.ap-south-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-AP-SOUTHEAST-1\":{\"description\":\"AWS SES Asia Pacific (Singapore)\",\"host\":\"email-smtp.ap-southeast-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-AP-SOUTHEAST-2\":{\"description\":\"AWS SES Asia Pacific (Sydney)\",\"host\":\"email-smtp.ap-southeast-2.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-CA-CENTRAL-1\":{\"description\":\"AWS SES Canada (Central)\",\"host\":\"email-smtp.ca-central-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-EU-CENTRAL-1\":{\"description\":\"AWS SES Europe (Frankfurt)\",\"host\":\"email-smtp.eu-central-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-EU-NORTH-1\":{\"description\":\"AWS SES Europe (Stockholm)\",\"host\":\"email-smtp.eu-north-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-EU-WEST-1\":{\"description\":\"AWS SES Europe (Ireland)\",\"host\":\"email-smtp.eu-west-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-EU-WEST-2\":{\"description\":\"AWS SES Europe (London)\",\"host\":\"email-smtp.eu-west-2.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-EU-WEST-3\":{\"description\":\"AWS SES Europe (Paris)\",\"host\":\"email-smtp.eu-west-3.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-SA-EAST-1\":{\"description\":\"AWS SES South America (SÃ£o Paulo)\",\"host\":\"email-smtp.sa-east-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-US-EAST-1\":{\"description\":\"AWS SES US East (N. Virginia)\",\"host\":\"email-smtp.us-east-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-US-EAST-2\":{\"description\":\"AWS SES US East (Ohio)\",\"host\":\"email-smtp.us-east-2.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-US-GOV-EAST-1\":{\"description\":\"AWS SES GovCloud (US-East)\",\"host\":\"email-smtp.us-gov-east-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-US-GOV-WEST-1\":{\"description\":\"AWS SES GovCloud (US-West)\",\"host\":\"email-smtp.us-gov-west-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-US-WEST-1\":{\"description\":\"AWS SES US West (N. California)\",\"host\":\"email-smtp.us-west-1.amazonaws.com\",\"port\":465,\"secure\":true},\"SES-US-WEST-2\":{\"description\":\"AWS SES US West (Oregon)\",\"host\":\"email-smtp.us-west-2.amazonaws.com\",\"port\":465,\"secure\":true},\"Seznam\":{\"description\":\"Seznam Email (Czech email provider)\",\"aliases\":[\"Seznam Email\"],\"domains\":[\"seznam.cz\",\"email.cz\",\"post.cz\",\"spoluzaci.cz\"],\"host\":\"smtp.seznam.cz\",\"port\":465,\"secure\":true},\"SMTP2GO\":{\"description\":\"SMTP2GO\",\"host\":\"mail.smtp2go.com\",\"port\":2525},\"Sparkpost\":{\"description\":\"SparkPost\",\"aliases\":[\"SparkPost\",\"SparkPost Mail\"],\"domains\":[\"sparkpost.com\"],\"host\":\"smtp.sparkpostmail.com\",\"port\":587,\"secure\":false},\"Tipimail\":{\"description\":\"Tipimail (email delivery service)\",\"host\":\"smtp.tipimail.com\",\"port\":587},\"Tutanota\":{\"description\":\"Tutanota (Tuta Mail)\",\"domains\":[\"tutanota.com\",\"tuta.com\",\"tutanota.de\",\"tuta.io\"],\"host\":\"smtp.tutanota.com\",\"port\":465,\"secure\":true},\"Yahoo\":{\"description\":\"Yahoo Mail\",\"domains\":[\"yahoo.com\"],\"host\":\"smtp.mail.yahoo.com\",\"port\":465,\"secure\":true},\"Yandex\":{\"description\":\"Yandex Mail\",\"domains\":[\"yandex.ru\"],\"host\":\"smtp.yandex.ru\",\"port\":465,\"secure\":true},\"Zimbra\":{\"description\":\"Zimbra Mail Server\",\"aliases\":[\"Zimbra Collaboration\"],\"host\":\"smtp.zimbra.com\",\"port\":587,\"requireTLS\":true},\"Zoho\":{\"description\":\"Zoho Mail\",\"host\":\"smtp.zoho.com\",\"port\":465,\"secure\":true,\"authMethod\":\"LOGIN\"}}","\"use server\"\n\nimport { cookies } from \"next/headers\"\nimport { revalidatePath } from \"next/cache\"\nimport { verifyAuth } from \"@/lib/session\"\nimport { sql } from \"@/lib/db\"\nimport { sendEmail, generateShippingConfirmationEmail, generateOrderCancellationEmail } from \"@/lib/email\"\n\nexport async function updateOrderStatus(orderId: number, status: string) {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"session\")?.value\n\n  if (!token) {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  const user = await verifyAuth(token)\n  if (!user || user.role !== \"admin\") {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  try {\n    console.log(`[v0] Updating order ${orderId} status to ${status}`);\n    \n    // Get order details before updating\n    const orderDetails: any = await sql`\n      SELECT o.*, u.full_name, u.email as customer_email, u.phone as customer_phone\n      FROM orders o\n      JOIN users u ON o.user_id = u.id\n      WHERE o.id = ${orderId}\n    `\n\n    const orderItems: any = await sql`\n      SELECT * FROM order_items WHERE order_id = ${orderId}\n    `\n\n    await sql`\n      UPDATE orders\n      SET status = ${status}, updated_at = CURRENT_TIMESTAMP\n      WHERE id = ${orderId}\n    `\n    \n    console.log(`[v0] Order ${orderId} status updated successfully`);\n\n    // Send shipping confirmation email when status is updated to shipped\n    if (status === \"shipped\" && orderDetails.length > 0) {\n      const order = orderDetails[0]\n      const customer = {\n        full_name: order.full_name,\n        email: order.customer_email,\n        phone: order.customer_phone\n      }\n\n      // Get shipping address\n      let shippingAddress = null\n      if (order.shipping_address_id) {\n        const addressResult: any = await sql`\n          SELECT * FROM addresses WHERE id = ${order.shipping_address_id}\n        `\n        if (addressResult.length > 0) {\n          shippingAddress = addressResult[0]\n        }\n      } else if (order.shipping_address) {\n        try {\n          shippingAddress = JSON.parse(order.shipping_address)\n        } catch (e) {\n          shippingAddress = {}\n        }\n      }\n\n      if (shippingAddress) {\n        // Send shipping confirmation email to customer\n        try {\n          console.log(`[v0] Sending shipping confirmation email to ${customer.email}`);\n          const emailHtml = generateShippingConfirmationEmail(order, customer, orderItems, shippingAddress, null)\n          await sendEmail({\n            to: customer.email,\n            subject: `Your Order #${order.order_number} Has Been Shipped`,\n            html: emailHtml\n          })\n          console.log(`[v0] Shipping confirmation email sent successfully to ${customer.email}`);\n        } catch (emailError) {\n          console.error(\"[v0] Failed to send shipping confirmation email:\", emailError)\n        }\n      } else {\n        console.warn(\"[v0] No shipping address found for order, skipping shipping confirmation email\");\n      }\n    }\n\n    revalidatePath(\"/admin/orders\")\n    return { success: true }\n  } catch (error) {\n    console.error(\"[v0] Failed to update order status:\", error);\n    return { success: false, error: \"Failed to update order\" }\n  }\n}\n\nexport async function deleteProduct(productId: number) {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"session\")?.value\n\n  if (!token) {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  const user = await verifyAuth(token)\n  if (!user || user.role !== \"admin\") {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  try {\n    await sql`\n      DELETE FROM products\n      WHERE id = ${productId}\n    `\n\n    revalidatePath(\"/admin/products\")\n    revalidatePath(\"/shop\")\n    return { success: true }\n  } catch (error) {\n    return { success: false, error: \"Failed to delete product\" }\n  }\n}\n\nexport async function addProduct(data: any) {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"session\")?.value\n\n  if (!token) {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  const user = await verifyAuth(token)\n  if (!user || user.role !== \"admin\") {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  try {\n    const slug = data.name\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, \"-\")\n      .replace(/(^-|-$)/g, \"\")\n\n    const imagesJson = JSON.stringify(Array.isArray(data.images) ? data.images : [data.image_url])\n\n    await sql`\n      INSERT INTO products (\n        name, slug, description, price, category_id, image_url, images, metal_purity, design_number\n      )\n      VALUES (\n        ${data.name}, ${slug}, ${data.description}, ${data.price}, \n        ${data.category_id}, ${data.image_url},\n        ${imagesJson}, ${data.metal_purity || null}, ${data.design_number || null}\n      )\n    `\n\n    revalidatePath(\"/admin/products\")\n    revalidatePath(\"/shop\")\n    return { success: true }\n  } catch (error) {\n    return { success: false, error: \"Failed to add product\" }\n  }\n}\n\nexport async function updateProduct(productId: number, data: any) {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"session\")?.value\n\n  if (!token) {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  const user = await verifyAuth(token)\n  if (!user || user.role !== \"admin\") {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  try {\n    const imagesJson = JSON.stringify(Array.isArray(data.images) ? data.images : [data.image_url])\n\n    await sql`\n      UPDATE products\n      SET \n        name = ${data.name},\n        description = ${data.description},\n        price = ${data.price},\n        category_id = ${data.category_id},\n        image_url = ${data.image_url},\n        images = ${imagesJson},\n        metal_purity = ${data.metal_purity || null},\n        design_number = ${data.design_number || null},\n        updated_at = CURRENT_TIMESTAMP\n      WHERE id = ${productId}\n    `\n\n    revalidatePath(\"/admin/products\")\n    revalidatePath(\"/shop\")\n    revalidatePath(`/products/${productId}`)\n    return { success: true }\n  } catch (error) {\n    return { success: false, error: \"Failed to update product\" }\n  }\n}\n\nexport async function addCategory(data: {\n  name: string\n  description: string\n  image_url: string\n  seo_title?: string\n  seo_description?: string\n}) {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"session\")?.value\n\n  if (!token) {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  const user = await verifyAuth(token)\n  if (!user || user.role !== \"admin\") {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  try {\n    const slug = data.name\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, \"-\")\n      .replace(/(^-|-$)/g, \"\")\n\n    const seoTitle = data.seo_title || `${data.name} | NIVARA Jewellery`\n    const seoDescription = data.seo_description || data.description\n\n    await sql`\n      INSERT INTO categories (name, slug, description, image_url, meta_title, meta_description)\n      VALUES (${data.name}, ${slug}, ${data.description}, ${data.image_url}, ${seoTitle}, ${seoDescription})\n    `\n\n    revalidatePath(\"/admin/categories\")\n    revalidatePath(\"/shop\")\n    revalidatePath(\"/categories\")\n    return { success: true }\n  } catch (error) {\n    return { success: false, error: \"Failed to add category\" }\n  }\n}\n\nexport async function updateCategory(\n  categoryId: number,\n  data: { name: string; description: string; image_url: string; seo_title?: string; seo_description?: string },\n) {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"session\")?.value\n\n  if (!token) {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  const user = await verifyAuth(token)\n  if (!user || user.role !== \"admin\") {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  try {\n    const slug = data.name\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, \"-\")\n      .replace(/(^-|-$)/g, \"\")\n\n    const seoTitle = data.seo_title || `${data.name} | NIVARA Jewellery`\n    const seoDescription = data.seo_description || data.description\n\n    await sql`\n      UPDATE categories\n      SET \n        name = ${data.name},\n        slug = ${slug},\n        description = ${data.description},\n        image_url = ${data.image_url},\n        meta_title = ${seoTitle},\n        meta_description = ${seoDescription}\n      WHERE id = ${categoryId}\n    `\n\n    revalidatePath(\"/admin/categories\")\n    revalidatePath(\"/shop\")\n    revalidatePath(`/categories/${slug}`)\n    return { success: true }\n  } catch (error) {\n    return { success: false, error: \"Failed to update category\" }\n  }\n}\n\nexport async function deleteCategory(categoryId: number) {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"session\")?.value\n\n  if (!token) {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  const user = await verifyAuth(token)\n  if (!user || user.role !== \"admin\") {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  try {\n    await sql`\n      DELETE FROM categories\n      WHERE id = ${categoryId}\n    `\n\n    revalidatePath(\"/admin/categories\")\n    revalidatePath(\"/shop\")\n    revalidatePath(\"/categories\")\n    return { success: true }\n  } catch (error) {\n    return { success: false, error: \"Failed to delete category\" }\n  }\n}\n\nexport async function cancelOrder(orderId: number) {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"session\")?.value\n\n  if (!token) {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  const user = await verifyAuth(token)\n  if (!user || user.role !== \"admin\") {\n    return { success: false, error: \"Unauthorized\" }\n  }\n\n  try {\n    console.log(`[v0] Cancelling order ${orderId}`);\n    \n    // Check if order exists\n    const order = await sql`\n      SELECT * FROM orders WHERE id = ${orderId}\n    `\n\n    if (order.length === 0) {\n      return { success: false, error: \"Order not found\" }\n    }\n\n    // Only allow cancellation for pending or processing orders\n    if (![\"pending\", \"processing\"].includes(order[0].status)) {\n      return { success: false, error: \"Cannot cancel order in current status\" }\n    }\n\n    // Get order details for email\n    const orderDetails: any = await sql`\n      SELECT o.*, u.full_name, u.email as customer_email, u.phone as customer_phone\n      FROM orders o\n      JOIN users u ON o.user_id = u.id\n      WHERE o.id = ${orderId}\n    `\n\n    const orderItems: any = await sql`\n      SELECT * FROM order_items WHERE order_id = ${orderId}\n    `\n\n    // Update order status\n    await sql`\n      UPDATE orders\n      SET status = 'cancelled'\n      WHERE id = ${orderId}\n    `\n    \n    console.log(`[v0] Order ${orderId} cancelled successfully`);\n\n    // Send cancellation email to customer\n    if (orderDetails.length > 0) {\n      const order = orderDetails[0]\n      const customer = {\n        full_name: order.full_name,\n        email: order.customer_email,\n        phone: order.customer_phone\n      }\n\n      // Get shipping address\n      let shippingAddress = null\n      if (order.shipping_address_id) {\n        const addressResult: any = await sql`\n          SELECT * FROM addresses WHERE id = ${order.shipping_address_id}\n        `\n        if (addressResult.length > 0) {\n          shippingAddress = addressResult[0]\n        }\n      } else if (order.shipping_address) {\n        try {\n          shippingAddress = JSON.parse(order.shipping_address)\n        } catch (e) {\n          shippingAddress = {}\n        }\n      }\n\n      if (shippingAddress) {\n        try {\n          console.log(`[v0] Sending cancellation email to ${customer.email}`);\n          const emailHtml = generateOrderCancellationEmail(order, customer, orderItems, shippingAddress)\n          await sendEmail({\n            to: customer.email,\n            subject: `Order #${order.order_number} Cancelled`,\n            html: emailHtml\n          })\n          console.log(`[v0] Cancellation email sent successfully to ${customer.email}`);\n        } catch (emailError) {\n          console.error(\"[v0] Failed to send cancellation email:\", emailError)\n        }\n      } else {\n        console.warn(\"[v0] No shipping address found for order, skipping cancellation email\");\n      }\n    }\n\n    revalidatePath(\"/admin/orders\")\n    revalidatePath(`/admin/orders/${orderId}`)\n    return { success: true }\n  } catch (error) {\n    console.error(\"[v0] Cancel order error:\", error)\n    return { success: false, error: \"Failed to cancel order\" }\n  }\n}"],"names":["registerServerReference","ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"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","ignoreList":[0,1]}