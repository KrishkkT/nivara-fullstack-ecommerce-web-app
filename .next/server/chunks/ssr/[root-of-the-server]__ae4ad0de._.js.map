{"version":3,"sources":["../../../../components/cancel-order-button.tsx/__nextjs-internal-proxy.mjs","../../../../app/account/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CancelOrderButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call CancelOrderButton() from the server but CancelOrderButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/cancel-order-button.tsx\",\n    \"CancelOrderButton\",\n);\n","import { redirect } from 'next/navigation'\nimport { getSession } from \"@/lib/session\"\nimport { sql } from \"@/lib/db\"\nimport { Button } from \"@/components/ui/button\"\nimport Link from \"next/link\"\nimport { signOut } from \"@/app/actions/auth\"\nimport { formatPrice } from \"@/lib/utils\"\nimport { CancelOrderButton } from \"@/components/cancel-order-button\"\nimport { User } from 'lucide-react'\n\nexport const metadata = {\n  title: \"My Account | NIVARA\",\n  description: \"Manage your account and orders\",\n}\n\nexport default async function AccountPage() {\n  const session = await getSession()\n\n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const user = await sql`\n    SELECT * FROM users WHERE id = ${session.userId}\n  `\n\n  const orders = await sql`\n    SELECT * FROM orders \n    WHERE user_id = ${session.userId}\n    ORDER BY created_at DESC\n    LIMIT 5\n  `\n\n  return (\n    <div className=\"container px-4 py-12 animate-fadeIn\">\n      <h1 className=\"text-4xl font-serif tracking-tight mb-8\">My Account</h1>\n\n      <div className=\"grid md:grid-cols-3 gap-8\">\n        <div className=\"md:col-span-1\">\n          <div className=\"bg-card border rounded-lg p-6 space-y-4\">\n            <div>\n              <h2 className=\"text-xl font-semibold mb-2\">{user[0].full_name}</h2>\n              <p className=\"text-sm text-muted-foreground\">{user[0].email}</p>\n              {user[0].phone && <p className=\"text-sm text-muted-foreground\">{user[0].phone}</p>}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Button variant=\"outline\" className=\"w-full justify-start\" asChild>\n                <Link href=\"/profile\">\n                  <User className=\"mr-2 h-4 w-4\" />\n                  Profile\n                </Link>\n              </Button>\n              \n              <form action={signOut}>\n                <Button type=\"submit\" variant=\"outline\" className=\"w-full bg-transparent\">\n                  Sign Out\n                </Button>\n              </form>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"md:col-span-2 space-y-6\">\n          <div className=\"bg-card border rounded-lg p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-xl font-semibold\">Recent Orders</h2>\n              <Button variant=\"outline\" size=\"sm\" asChild>\n                <Link href=\"/orders\">View All</Link>\n              </Button>\n            </div>\n\n            {orders.length === 0 ? (\n              <p className=\"text-muted-foreground text-center py-8\">No orders yet</p>\n            ) : (\n              <div className=\"space-y-4\">\n                {orders.map((order: any) => (\n                  <div key={order.id} className=\"border rounded-lg p-4 hover:bg-accent transition-all hover:shadow-md\">\n                    <Link href={`/orders/${order.id}`} className=\"block\">\n                      <div className=\"flex justify-between items-start mb-2\">\n                        <div>\n                          <p className=\"font-medium\">{order.order_number}</p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {new Date(order.created_at).toLocaleDateString()}\n                          </p>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"font-semibold\">{formatPrice(Number.parseFloat(order.total_amount))}</p>\n                          <span\n                            className={`text-xs px-2 py-1 rounded ${\n                              order.status === \"delivered\"\n                                ? \"bg-green-100 text-green-800\"\n                                : order.status === \"cancelled\"\n                                  ? \"bg-red-100 text-red-800\"\n                                  : \"bg-yellow-100 text-yellow-800\"\n                            }`}\n                          >\n                            {order.status}\n                          </span>\n                        </div>\n                      </div>\n                    </Link>\n                    {(order.status === \"pending\" || order.status === \"processing\") && (\n                      <div className=\"mt-3 pt-3 border-t\">\n                        <CancelOrderButton orderId={order.id} />\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}